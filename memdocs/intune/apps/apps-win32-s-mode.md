---
title: Включение приложений Win32 на устройствах в режиме S
titleSuffix: Microsoft Intune
description: Сведения о том, как включить приложения Win32 на устройствах в режиме S с помощью Microsoft Intune.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 01/08/2020
ms.topic: conceptual
ms.service: microsoft-intune
ms.subservice: apps
ms.localizationpriority: high
ms.technology: ''
ms.assetid: ''
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.collection: M365-identity-device-management
ms.openlocfilehash: 796e95b09193228fdc4612a370658e532fbbd2c6
ms.sourcegitcommit: e2567b5beaf6c5bf45a2d493b8ac05d996774cac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2020
ms.locfileid: "80324371"
---
# <a name="enable-win32-apps-on-s-mode-devices"></a>Включение приложений Win32 на устройствах в режиме S

[Windows 10 в режиме S](https://docs.microsoft.com/windows/deployment/s-mode) — это заблокированная операционная система, которая запускает только приложения, установленные из Microsoft Store. По умолчанию устройства в режиме S не поддерживают установку и выполнение приложений Win32. Эти устройства реализуют единую *базовую политику Win 10S*, которая блокирует выполнение приложений Win32 на устройстве в режиме S. Но вы можете создать и применить **дополнительную политику режима S** в Intune, чтобы устанавливать и запускать приложения Win32 на управляемых устройствах в режиме S. [Управление приложениями в Защитнике Майкрософт (WDAC)](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control) предоставляет средства PowerShell, с помощью которых вы можете создать одну или несколько дополнительных политик режима S. Дополнительные политики необходимо подписать с помощью службы [Device Guard Signing Service (DGSS)](https://go.microsoft.com/fwlink/?linkid=2095629) или средства [SignTool.exe](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/use-signed-policies-to-protect-windows-defender-application-control-against-tampering), а затем передать и распространить политики через Intune. Вместо этого можно подписать дополнительные политики с помощью сертификата соразработки вашей организации, но предпочтительней использовать вариант с DGSS. Если вы решите применить сертификат соразработки вашей организации, на устройстве должен присутствовать корневой сертификат, от которого наследуется сертификат соразработки.

Назначая дополнительную политику режима S в Intune, вы разрешаете исключения из существующей политики режима S для этого устройства, что позволит отправить на него соответствующий подписанный каталог приложений. Эта политика задает список разрешенных приложений (каталог приложений), которые могут использоваться на устройстве, работающем в режиме S.

> [!NOTE]
> Приложения Win32 на устройствах в режиме S поддерживаются только в Windows 10 с обновлением от ноября 2019 г. (сборка 18363) или более поздних версиях.

<!-- Add WDAC tooling diagram  -->

Ниже описаны действия, которые позволяют запускать приложения Win32 на устройстве Windows 10 в режиме S.

1. Включите устройство в режиме S с помощью Intune при регистрации.
2. Создайте дополнительную политику, которая разрешает приложения Win32.
   - Чтобы создать дополнительную политику, можно использовать функцию [Управление приложениями в Защитнике Майкрософт (WDAC)](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/windows-defender-application-control). Идентификатор базовой политики, указанный в политике, должен совпадать с идентификатором базовой политики режима S (который жестко запрограммирован в клиенте). Также убедитесь, что политике задан соответствующий порядковый номер версии, следующий за номером предыдущей версии.
   - Для подписывания дополнительной политики используется DGSS. Дополнительные сведения см. в [этой статье](https://docs.microsoft.com/microsoft-store/sign-code-integrity-policy-with-device-guard-signing).
   - Чтобы отправить подписанную дополнительную политику в Intune, создайте дополнительную политику режима S, как описано ниже.
3. Чтобы разрешить использовать каталоги приложений Win32 через Intune, выполните следующее:
   - Создайте файлы каталога (по одному для каждого приложения) и подпишите их с помощью DGSS или другой инфраструктуры сертификатов.
   - Упакуйте подписанный каталог в *INTUNEWIN-файл* с помощью [средства подготовки файлов Win32](https://go.microsoft.com/fwlink/?linkid=2065730). При создании файла каталога с помощью [средства подготовки содержимого Microsoft Win32](https://go.microsoft.com/fwlink/?linkid=2065730) ограничений именования нет. При создании файла *.intunewin* из указанной исходной папки и файла установки можно указать отдельную папку, содержащую только файлы каталога, с помощью параметра-a командной строки. Дополнительные сведения о подготовке содержимого приложений Win32 к отправке в Intune см. в [этой статье](apps-win32-app-management.md#prepare-the-win32-app-content-for-upload).
   - Intune использует подписанный каталог приложений для установки приложений Win32 на устройстве в режиме S с помощью [управляющего расширения Intune](intune-management-extension.md).

> [!NOTE]
> Поддержка пакетов бизнес-приложений `.appx` и `.appx` для Windows 10 в режиме S будет обеспечена подписью в Microsoft Store для бизнеса (MSFB).
>
> **Дополнительные политики режима S** для приложений должны предоставляться с помощью управляющего расширения Intune.
>
> Политики режима S применяются на уровне устройства. На каждом устройстве объединяются несколько целевых политик. На устройстве применяется итоговая сводная политика.

Чтобы создать дополнительную политику режима S, выполните следующие шаги:

1. Войдите в [Центр администрирования Microsoft Endpoint Manager](https://go.microsoft.com/fwlink/?linkid=2109431).
2. Выберите **Приложения** > **Дополнительные политики режима S** > **Создать политику**.
3. Перед добавлением **файла политики** его необходимо создать и подписать. Дополнительные сведения см. на странице
    - [Create a WDAC policy using PowerShell tools and convert it to a binary format](https://go.microsoft.com/fwlink/?linkid=2095387) (Разрешенные бизнес-приложения Win32 на устройствах в режиме S под управлением Intune);
    - [Sign using Device Guard Signing Service](https://go.microsoft.com/fwlink/?linkid=2095629) (Подписание с помощью службы Device Guard) **(рекомендуется)** .

4. На странице **Основные** добавьте следующие значения.

    | Значение | Описание: |
    |--------------|------------------------------------------------|
    | Файл политики | Это файл, содержащий политику WDAC. |
    | Имя | Название этой политики. |
    | Описание: | (Необязательно) Описание этой политики. |

5. Нажмите кнопку **Далее. Теги области** .<br>
   На странице **Теги области** при необходимости можно настроить теги области, чтобы определить, кто может просматривать эту политику приложения в Intune. Дополнительные сведения о тегах области см. в статье [Use role-based access control (RBAC) and scope tags for distributed IT](../fundamentals/scope-tags.md) (Использование управления доступом на основе ролей (RBAC) и тегов области для распределенной ИТ-разработки).

6. Нажмите кнопку **Далее. Назначения**.<br>
   Страница **Назначения** позволяет назначать политику пользователям и устройствам. Важно отметить, что вы можете назначить политику любому устройству, даже если оно не находится под управлением Intune.
7. Нажмите кнопку **Далее. Проверка и создание** для просмотра значений, введенных для профиля.
8. По завершении нажмите кнопку **Создать**, чтобы создать дополнительную политику режима S в Intune.

После создания политики она появится в списке дополнительных политик режима S в Intune. После назначения политики она развертывается на устройствах. Обратите внимание, что приложение должно быть развернуто в той же группе безопасности, что и дополнительная политика. Это позволит предлагать и назначать приложения для этих устройств. После этого конечные пользователи смогут устанавливать и выполнять приложения на устройствах в режиме S.

## <a name="removal-of-s-mode-policy"></a>Удаление политики режима S

В настоящее время для удаления дополнительной политики режима S с устройства вам придется назначить и развернуть пустую политику, чтобы заменить ей существующую дополнительную политику режима S.

## <a name="policy-reporting"></a>Отчеты политики

Дополнительная политика режима S, которая применяется на уровне устройства, позволяет получить отчеты только на уровне устройства. В отчетах на уровне устройства доступны сведения об успешных и ошибочных действиях.

В консоли Intune для политик отчетов режима S отображаются следующие значения:
- **Успешно** — Применяется дополнительная политика режима S.
- **Неизвестно** — Состояние применения дополнительной политики режима S неизвестно.
- **TokenError**. Дополнительная политика режима S имеет нормальную структуру, но возникает ошибка при авторизации маркера.
- **NotAuthorizedByToken**. Полученный маркер не разрешает применить дополнительную политику режима S.
- **PolicyNotFound**. Дополнительная политика режима S не найдена.

## <a name="next-steps"></a>Дальнейшие шаги

- Дополнительные сведения см. в статье [о приложениях Win32 в режиме S](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/lob-win32-apps-on-s).
- Дополнительные сведения о добавлении приложений в Intune см. в разделе [Добавление приложений в Microsoft Intune](apps-add.md).
- Дополнительные сведения о приложениях Win32 см. в статье [Изолированная среда Intune — управление приложениями Win32](apps-win32-app-management.md).
