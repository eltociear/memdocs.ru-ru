---
title: Добавление политик конфигурации приложений для управляемых устройств iOS и iPadOS
titleSuffix: Microsoft Intune
description: Узнайте о том, как предоставлять данные конфигурации при работе с приложением iOS и iPadOS, используя политики конфигурации приложений.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 02/11/2020
ms.topic: conceptual
ms.service: microsoft-intune
ms.subservice: apps
ms.localizationpriority: high
ms.technology: ''
ms.assetid: c9163693-d748-46e0-842a-d9ba113ae5a8
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.collection: M365-identity-device-management
ms.openlocfilehash: 28ce4e7d80e79f752bded8f0cdf03494aa629e1b
ms.sourcegitcommit: 7f17d6eb9dd41b031a6af4148863d2ffc4f49551
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/21/2020
ms.locfileid: "80233448"
---
# <a name="add-app-configuration-policies-for-managed-iosipados-devices"></a>Добавление политик конфигурации приложений для управляемых устройств iOS и iPadOS

[!INCLUDE [azure_portal](../includes/azure_portal.md)]

Используйте политики конфигурации приложений в Microsoft Intune, чтобы задать настраиваемые параметры конфигурации для приложения iOS или iPadOS. Эти параметры конфигурации позволяют настроить приложение в соответствии с указаниями поставщиков приложений. Эти параметры конфигурации (ключи и значения) нужно получить от поставщика приложения. Чтобы настроить приложение, укажите параметры в виде ключей и значений или в виде содержащего их XML-файла.

Администраторы Microsoft Intune могут контролировать добавление учетных записей в приложения Microsoft Office на управляемых устройствах. Вы можете ограничивать доступ только для учетных записей разрешенных организаций и блокировать личные учетные записи на зарегистрированных устройствах. Вспомогательные приложения обработают конфигурацию приложения, а затем удалят и заблокируют неутвержденные учетные записи. Параметры политики конфигурации используются, когда приложение проверяет их значения (как правило, при первом запуске).

Добавив политику конфигурации приложений, вы можете задать ей назначения. Задание политики назначений позволяет включать и исключать группы пользователей, к которым будет применяться политика. Если вы захотите включить какие-то группы, то можете выбрать определенные группы для включения или встроенные группы. К встроенным группам относятся **Все пользователи**, **Все устройства** и **Все пользователи и все устройства**. 

> [!NOTE]
> В консоли Intune для вашего удобства доступны предварительно созданные группы **Все пользователи** и **Все устройства** со встроенной оптимизацией. Настоятельно рекомендуем использовать эти группы для охвата всех пользователей и всех устройств, а не создавать группы "Все пользователи" и "Все устройства" самостоятельно.

После выбора групп, которые будут включены в политику конфигурации приложений, вы также можете выбрать группы, которые будут исключены. Дополнительные сведения см. в статье [Включение и исключение назначений приложений в Microsoft Intune](apps-inc-exl-assignments.md).

> [!TIP]
> Такой тип политики сейчас доступен только для устройств iOS или iPadOS версии 8.0 и выше. Он поддерживает следующие типы установки приложения:
>
> - **Управляемое приложение iOS/iPadOS из магазина приложений**
> - **Пакет приложений для iOS**
>
> Дополнительные сведения о типах установки приложений см. в статье [Добавление приложения в Microsoft Intune](apps-add.md). Дополнительные сведения о включении конфигурации приложения в пакет приложения ".ipa" для управляемых устройств см. в разделе Управляемая конфигурация приложения в [документации разработчика iOS](https://developer.apple.com/library/archive/samplecode/sc2279/Introduction/Intro.html).

## <a name="create-an-app-configuration-policy"></a>Создание политики конфигурации приложений

1. Войдите в [Центр администрирования Microsoft Endpoint Manager](https://go.microsoft.com/fwlink/?linkid=2109431).
2. Выберите **Приложения** > **Политики конфигурации приложений** > **Добавить** > **Управляемые устройства**. Обратите внимание, что вы можете выбрать между пунктами **Управляемые устройства** и **Управляемые приложения**. Дополнительные сведения см. в разделе [Приложения, поддерживающие конфигурацию приложений](app-configuration-policies-overview.md#apps-that-support-app-configuration).
3. На странице **Основные** добавьте следующие сведения.
    - **Имя**. Имя профиля, которое отображается на портале Azure.
    - **Описание**. Описание профиля, которое отображается на портале Azure.
    - **Тип регистрации устройства** — этот параметр имеет значение **Управляемые устройства**.
4. Для параметра **Платформа** выберите **iOS/iPadOS**.
5. Щелкните **Выбрать приложение** рядом с пунктом **Целевое приложение**. Откроется панель **Связанное приложение**. 
6. В области **Целевое приложение** выберите управляемое приложение, которое нужно связать с политикой конфигурации, и нажмите кнопку **ОК**.
7. Нажмите кнопку **Далее**, чтобы отобразить страницу **Параметры**.
8. В раскрывающемся списке выберите **Формат параметров конфигурации**. Выберите один из следующих методов, чтобы добавить сведения о конфигурации:
    - **Использовать конструктор конфигурации**
    - **Введите данные XML**<br><br>
    Дополнительные сведения об использовании конструктора конфигураций см. в разделе [Использование конструктора конфигураций](#use-configuration-designer). Дополнительные сведения о вводе XML-данных см. в разделе [Ввод данных XML](#enter-xml-data). 
9. Нажмите кнопку **Далее**, чтобы перейти на страницу **Назначения**.
10. В раскрывающемся списке рядом с **Кому назначить** выберите либо **Выбранные группы**, **Все пользователи**, **Все устройства** или **All users and all devies** (Все пользователи и все устройства), чтобы назначить политику конфигурации приложений.

    ![Снимок экрана: вкладка "Включить" на странице назначений политик](./media/app-configuration-policies-use-ios/app-config-policy01.png)

11. Выберите **Все пользователи** из раскрывающегося списка.

    ![Снимок экрана: раскрывающийся список "Назначения политик — все пользователи"](./media/app-configuration-policies-use-ios/app-config-policy02.png)

12. Щелкните **Выбрать группы для исключения**, чтобы открыть соответствующую панель.

    ![Снимок экрана: панель "Назначения политик" и "Выбрать группы для исключения"](./media/app-configuration-policies-use-ios/app-config-policy03.png)

13. Выберите группы, которые требуется исключить, и щелкните **Выбрать**.

    >[!NOTE]
    >Если при добавлении группы какая-то другая группа уже включена с выбранным типом назначения, этот тип станет для нее фиксированным, и выбрать для нее какой-то другой тип назначения будет невозможно. Поэтому вы не сможете исключить эту уже используемую группу.

14. Выберите **Далее**, чтобы перейти на страницу **Просмотр и создание**.
15. Щелкните **Создать**, чтобы добавить политику конфигурации приложений в Intune.

## <a name="use-configuration-designer"></a>Использование конструктора конфигураций

Microsoft Intune предоставляет параметры конфигурации, которые являются уникальными для приложения. Конструктор конфигураций используется для приложений на устройствах, которые зарегистрированы или не зарегистрированы в Microsoft Intune. Конструктор позволяет настроить определенные ключи и значения конфигурации, помогающие задать базовый XML-код. Необходимо также указать тип данных для каждого значения. Эти параметры автоматически передаются в приложения при их установке.

### <a name="add-a-setting"></a>Добавление параметра

1. Для каждого ключа и значения в конфигурации задайте следующие параметры.
   - **Ключ конфигурации**. Этот ключ однозначно определяет настройку конкретного параметра.
   - **Тип значения**. Тип данных значения конфигурации. Доступны следующие типы: Integer, Real, String или Boolean.
   - **Значение конфигурации**. Значение для конфигурации.
2. Нажмите кнопку **ОК**, чтобы задать параметры конфигурации.

### <a name="delete-a-setting"></a>Удаление параметра

1. Нажмите кнопку с многоточием ( **...** ) рядом с параметром.
2. Выберите **Удалить**.

Символы \{\{ и \}\} используются только для типов токенов и не должны применяться в других целях.

### <a name="allow-only-configured-organization-accounts-in-multi-identity-apps"></a>Разрешение использовать только настроенные учетные записи организации в приложениях с несколькими удостоверениями 

Администраторы Microsoft Intune могут контролировать добавление учетных записей в приложения Microsoft на управляемых устройствах. Вы можете ограничивать доступ только для учетных записей разрешенных организаций и блокировать личные учетные записи на зарегистрированных устройствах. Для устройств iOS или iPadOS используйте следующие пары "ключ — значение":

| **Key** | **Значения** |
|----|----|
| IntuneMAMAllowedAccountsOnly | <ul><li>**Включено**: единственной учетной записью является управляемая пользователем учетная запись, определенная ключом [IntuneMAMUPN](data-transfer-between-apps-manage-ios.md#configure-user-upn-setting-for-microsoft-intune-or-third-party-emm).</li><li>**Отключено** (или любое значение, которое не совпадает со значением **Включено** без учета регистра): допускается любая учетная запись.</li></ul> |
| IntuneMAMUPN | <ul><li>Имя участника-пользователя учетной записи, которой разрешено входить в приложение.</li><li> Для устройств, зарегистрированных в Intune, маркер <code>{{userprincipalname}}</code> может использоваться для представления учетной записи зарегистрированного пользователя.</li></ul>  |

   > [!NOTE]
   > Следующие приложения обрабатывают описанную выше конфигурацию приложения и разрешают только учетные записи организации:
   > - Edge для iOS (44.8.7 и более поздней версии)
   > - OneDrive для iOS (10.34 и более поздней версии)
   > - Outlook для (iOS 2.99.0 и более поздней версии)

## <a name="enter-xml-data"></a>Ввод данных XML

Введите или вставьте список свойств XML, содержащий нужные вам параметры конфигурации приложений для устройств, зарегистрированных в Intune. Формат списка свойств XML зависит от настраиваемого приложения. Для получения сведений о необходимом формате обратитесь к поставщику приложения.

Intune проверяет формат XML-файла. Но Intune не проверяет, будет ли список свойств XML работать с целевым приложением.

Дополнительные сведения о списках свойств XML.

- См. статью [Understand XML Property Lists](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/PropertyLists/UnderstandXMLPlist/UnderstandXMLPlist.html) (Общие сведения о списках свойств XML) в библиотеке разработчика iOS.

### <a name="example-format-for-an-app-configuration-xml-file"></a>Пример формата для XML-файла конфигурации приложения

При создании файла конфигурации приложения можно указать одно или несколько следующих значений в данном формате:

```xml
<dict>
  <key>userprincipalname</key>
  <string>{{userprincipalname}}</string>
  <key>mail</key>
  <string>{{mail}}</string>
  <key>partialupn</key>
  <string>{{partialupn}}</string>
  <key>accountid</key>
  <string>{{accountid}}</string>
  <key>deviceid</key>
  <string>{{deviceid}}</string>
  <key>userid</key>
  <string>{{userid}}</string>
  <key>username</key>
  <string>{{username}}</string>
  <key>serialnumber</key>
  <string>{{serialnumber}}</string>
  <key>serialnumberlast4digits</key>
  <string>{{serialnumberlast4digits}}</string>
  <key>udidlast4digits</key>
  <string>{{udidlast4digits}}</string>
  <key>aaddeviceid</key>
  <string>{{aaddeviceid}}</string>
</dict>
```

### <a name="supported-xml-plist-data-types"></a>Поддерживаемые типы данных XML PList

Intune поддерживает следующие типы данных в списке свойств:

- &lt;integer&gt;
- &lt;real&gt;
- &lt;string&gt;
- &lt;array&gt;
- &lt;dict&gt;
- &lt;true /&gt; или &lt;false /&gt;

### <a name="tokens-used-in-the-property-list"></a>Маркеры, используемые в списке свойств

Кроме того, Intune поддерживает следующие типы токенов в списке свойств:
- \{\{userprincipalname\}\}, например **John\@contoso.com**
- \{\{mail\}\}, например, **John\@contoso.com**
- \{\{partialupn\}\} — например **John**
- \{\{accountid\}\} — например **fc0dc142-71d8-4b12-bbea-bae2a8514c81**
- \{\{deviceid\}\} — например **b9841cd9-9843-405f-be28-b2265c59ef97**
- \{\{userid\}\} — например **3ec2c00f-b125-4519-acf0-302ac3761822**
- \{\{username\}\} — например **Илья Глазков**
- \{\{serialnumber\}\} — например **F4KN99ZUG5V2** (для устройств iOS и iPadOS)
- \{\{serialnumberlast4digits\}\} — например **G5V2** (для устройств iOS и iPadOS)
- \{\{aaddeviceid\}\} — например, **ab0dc123-45d6-7e89-aabb-cde0a1234b56**

## <a name="configure-the-company-portal-app-to-support-ios-and-ipados-dep-devices"></a>Настройка приложения Корпоративного портала для поддержки устройств с iOS и iPadOS DEP

Регистрации с помощью DEP (Программа регистрации устройств Apple) несовместимы с версией приложения "Корпоративный портал" в App Store. Но вы можете настроить приложение "Корпоративный портал", чтобы включить поддержку устройств iOS и iPadOS DEP, выполнив следующие действия.

1. При необходимости добавьте Корпоративный портал Intune, перейдя в **Intune** > **Приложения** > **Все приложения** > **Добавить**.
2. Перейдите в раздел **Приложения** > **Политики конфигурации приложений**, чтобы создать политику конфигурации приложений для приложения "Корпоративный портал".
3. Создание политики конфигурации приложений с XML. См. сведения о том, как создать политику конфигурации приложений и ввести данные XML в руководстве по [добавлению политик конфигурации приложений для управляемых устройств iOS и iPadOS](app-configuration-policies-use-ios.md).

    ``` xml
    <dict>
        <key>IntuneCompanyPortalEnrollmentAfterUDA</key>
        <dict>
            <key>IntuneDeviceId</key>
            <string>{{deviceid}}</string>
            <key>UserId</key>
            <string>{{userid}}</string>
        </dict>
    </dict>
    ```

3. Разверните корпоративный портал на устройствах с политикой конфигурации приложений, предназначенной для требуемых групп. Не забудьте развернуть политику только для тех групп устройств, которые уже зарегистрированы в DEP.
4. Попросите пользователей войти в приложение "Корпоративный портал" после его автоматической установки.

## <a name="monitor-iosipados--app-configuration-status-per-device"></a>Отслеживание состояния конфигурации приложений для iOS/iPadOS на отдельных устройствах 
После назначения политики конфигурации вы можете отслеживать состояние конфигурации приложений iOS и iPadOS на каждом управляемом устройстве. В разделе **Microsoft Intune** на портале Azure выберите **Устройства** > **Все устройства**. В списке управляемых устройств выберите определенное устройство, чтобы открыть его панель. На панели устройства выберите элемент **Конфигурация приложения**.  

## <a name="additional-information"></a>Дополнительные сведения

- [Развертывание параметров конфигурации приложения Outlook для iOS, iPadOS и Android](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/outlook-for-ios-and-android/outlook-for-ios-and-android-configuration-with-microsoft-intune)

## <a name="next-steps"></a>Дальнейшие действия

Продолжайте [назначать](apps-deploy.md) и [отслеживать](apps-monitor.md) приложение как обычно.
