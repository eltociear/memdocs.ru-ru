---
title: Политики конфигурации приложений для Microsoft Intune
titleSuffix: ''
description: Узнайте, как использовать политики конфигурации приложений на устройстве iOS, iPadOS или Android в Microsoft Intune.
keywords: ''
author: Erikre
ms.author: erikre
manager: dougeby
ms.date: 04/22/2020
ms.topic: how-to
ms.service: microsoft-intune
ms.subservice: apps
ms.localizationpriority: high
ms.technology: ''
ms.assetid: 834B4557-80A9-48C0-A72C-C98F6AF79708
ms.reviewer: mghadial
ms.suite: ems
search.appverid: MET150
ms.custom: intune-azure
ms.collection: M365-identity-device-management
ms.openlocfilehash: 6e99922c920966f4f0bb1037b5fc74799cfca7c5
ms.sourcegitcommit: 302556d3b03f1a4eb9a5a9ce6138b8119d901575
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2020
ms.locfileid: "83988785"
---
# <a name="app-configuration-policies-for-microsoft-intune"></a>Политики конфигурации приложений для Microsoft Intune

Политики конфигурации приложений помогут устранить проблемы с настройкой приложений, позволяя назначать параметры конфигураций для политики, которая назначается пользователям перед запуском приложения. Эти параметры затем автоматически предоставляются при настройке приложения на устройствах конечных пользователей, и конечные пользователи не должны предпринимать никаких действий. Параметры конфигурации уникальны для каждого приложения. 

Вы можете создавать и использовать политики конфигурации приложений в Microsoft Intune, чтобы задать параметры конфигурации для приложения в iOS, iPadOS или Android. Эти параметры конфигурации позволяют настраивать и администрировать приложение. Параметры политики конфигурации используются, когда приложение проверяет их значения (как правило, при первом запуске). 

Например, параметр приложения может потребовать от вас указать следующие сведения:

- Пользовательский номер порта
- языковые параметры;
- Параметры безопасности
- параметры фирменной символики, такие как эмблема компании.

Если конечные пользователи должны были бы вводить эти параметры, они могли бы сделать это неверно. Политики конфигурации приложений помогают обеспечить согласованность в рамках предприятия и сократить число обращений в службу технической поддержки от конечных пользователей, пытающихся самостоятельно настроить параметры. С помощью политик конфигурации приложений внедрение новых приложений можно провести проще и быстрее.

Доступные параметры конфигурации в конечном итоге определяются разработчиками приложения. Следует проверить документацию поставщика приложения, чтобы узнать, поддерживает ли приложение конфигурацию и какие конфигурации доступны. Для некоторых приложений Intune заполнит доступные параметры конфигурации. 

> [!NOTE]
> В управляемом магазине Google Play приложения, поддерживающие конфигурацию, будут помечены следующим образом:
> 
> ![Снимок экрана настраиваемого приложения](./media/app-configuration-policies-overview/configured-app.png)
>
> Будут отображаться только приложения из [управляемого магазина Google Play](https://play.google.com/work), а не из [магазина Google Play](https://play.google.com/store/apps), при использовании управляемых устройств в качестве типа регистрации для устройств с Android. Управляемый магазин Google Play, которые также известен как Android for Work (AfW) и Android Enterprise, содержит приложения в рабочем профиле, которые содержат версии приложений, поддерживающие конфигурацию приложения.

Вы можете назначать политику конфигурации приложений группам пользователей и устройств, используя сочетание [назначений включения и исключения](apps-inc-exl-assignments.md). Добавив политику конфигурации приложений, вы можете задать ей назначения. Задание политики назначений позволяет включать и исключать [группы](../fundamentals/groups-add.md) пользователей, к которым будет применяться политика. Если вы захотите включить какие-то группы, то можете выбрать определенные группы для включения или встроенные группы. К встроенным группам относятся **Все пользователи**, **Все устройства** и **Все пользователи и все устройства**.

Существует два варианта использования политик конфигураций приложений в Intune.
- **Управляемые устройства**. Устройство управляется Intune как поставщиком управления мобильными устройствами (MDM). Приложение должно быть спроектировано для поддержки конфигурации приложения.
- **Управляемые приложения** — приложения, разработанные для интеграции пакета SDK для приложений Intune. Это так называемое управление мобильными приложениями без регистрации ([MAM-WE](app-management.md#mobile-application-management-mam-basics)). Вы также можете заключить приложение в оболочку для реализации и поддержки пакета SDK для приложений Intune. Дополнительные сведения об этом см. в статье [Подготовка бизнес-приложений для политик защиты приложений](../developer/apps-prepare-mobile-application-management.md).

    > [!NOTE]
    > Управляемые приложения Intune будут возвращать состояние политики конфигурации приложений Intune с интервалом в 30 минут при развертывании в сочетании с политикой защиты приложений Intune. Если пользователю не назначена политика защиты приложений Intune, интервал возврата политики конфигурации приложений Intune задается равным 720 минутам.

## <a name="apps-that-support-app-configuration"></a>Приложения, поддерживающие конфигурацию приложений

### <a name="managed-devices"></a>Управляемые устройства
Политики конфигурации приложений используются для приложений, которые их поддерживают. Чтобы конфигурация приложения поддерживалась в Intune, в приложении изначально должна быть реализована поддержка использования конфигураций приложения, как определено операционной системой. Сведения о том, какие ключи конфигурации приложения поддерживаются, можно получить у поставщика приложения.

### <a name="managed-apps"></a>Управляемые приложения
Чтобы подготовить бизнес-приложения, можно интегрировать [пакет SDK для приложений Intune](../developer/app-sdk.md) в приложение или упаковать приложение после его разработки, используя [инструмент упаковки для приложений Intune](../developer/apps-prepare-mobile-application-management.md). Этот пакет позволяет уменьшить объем изменений кода, которые необходимо внести разработчику. Дополнительные сведения см. в статье [Обзор пакета SDK для приложений Intune](../developer/app-sdk.md). Сравнение пакета SDK для приложений Intune с инструментом упаковки для приложений Intune см. в статье [Подготовка бизнес-приложений для политик защиты приложений](../developer/apps-prepare-mobile-application-management.md#feature-comparison).

Выбор варианта **Управляемые приложения** в качестве **типа регистрации устройств** относится к приложениям, настроенным при помощи политик конфигурации Intune на устройстве, которое не зарегистрировано в системе управления устройствами, в то время как **Управляемые устройства** применяются к приложениям, развернутым через канал MDM, поэтому управление ими осуществляется с помощью Intune. Выберите подходящий вариант на основе этих описаний. 

![Тип регистрации устройств](./media/app-configuration-policies-overview/device-enrollment-type.png)

> [!NOTE]
> Для приложений с несколькими удостоверениями, таких как Microsoft Outlook, можно рассмотреть возможность использования параметров пользователя. Например, папка "Входящие" будет учитывать параметры пользователя и не изменять конфигурацию. Другие параметры позволяют управлять тем, может ли пользователь изменять этот параметр. См. сведения о [развертывании Outlook для параметров конфигурации приложений в iOS, iPadOS и Android](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/outlook-for-ios-and-android/outlook-for-ios-and-android-configuration-with-microsoft-intune).

## <a name="android-app-configuration-policies"></a>Политики конфигурации приложений Android

Для политик конфигурации приложений Android перед созданием профиля конфигурации приложения можно выбрать тип регистрации устройства. Можно учитывать профили сертификатов, основанных на типе регистрации (рабочий профиль или владелец устройства). Это обновление обеспечивает следующие возможности.

1. Если для типа регистрации устройств выбран рабочий профиль и профиль владельца устройства и создается новый профиль, вы не сможете связать профиль сертификата с политикой конфигурации приложения.
2. Если создается новый профиль и выбран только рабочий профиль, можно использовать политики сертификатов рабочего профиля, созданные в конфигурации устройства.
3. Если создается новый профиль и выбран только профиль владельца устройства, можно использовать политики сертификатов профиля владельца устройства, созданные в конфигурации устройства. 
4. Если вы развертываете профиль конфигурации Gmail или Nine на выделенном устройстве Android для бизнеса без привязки к пользователю, произойдет сбой, так как Intune не сможет разрешить этого пользователя.

> [!IMPORTANT]
> Существующие политики, созданные до выпуска этой функции (выпуск за апрель 2020 г. — 2004), которые не имеют профилей сертификатов, связанных с политикой, будут по умолчанию использовать профиль "Рабочий профиль" и "Владелец устройства" для типа регистрации устройства. Кроме того, существующие политики, созданные до выпуска этой функции и имеющие связанные с ними профили сертификатов, будут по умолчанию работать только в рабочем профиле.
> 
> Существующие политики не будут исправлять или выдавать новые сертификаты.

## <a name="validate-the-applied-app-configuration-policy"></a>Проверка примененной политики конфигурации приложений

Проверить политику конфигурации приложений можно с помощью следующих трех методов.

   1. Самостоятельно на устройстве. Обладает ли целевое приложение поведением, применяемым в политике конфигурации приложений?
   2. С помощью журналов диагностики (см. раздел "Журналы диагностики" ниже).
   3. Через портал Intune. В разделе **Монитор** политики можно видеть соответствующее состояние:

      ![Первый снимок экрана состояния установки устройства](./media/app-configuration-policies-overview/device-install-status-1.png)

      ![Второй снимок экрана состояния установки устройства](./media/app-configuration-policies-overview/device-install-status-2.png)

      Кроме того, в разделе **Intune** -> **Устройства** -> **Все устройства** в левой части экрана параметр **Конфигурация приложения** отобразит все назначенные политики и их состояние:

      ![Снимок экрана: конфигурация приложения](./media/app-configuration-policies-overview/app-configuration.png)

## <a name="diagnostic-logs"></a>Журналы диагностики

### <a name="iosipados-configuration-on-unmanaged-devices"></a>Конфигурация iOS/iPadOS на неуправляемых устройствах

Конфигурацию iOS или iPadOS можно проверить с помощью **журнала диагностики Intune** на неуправляемых устройствах для конфигурации управляемого приложения. В дополнение к приведенным ниже шагам можно получить доступ к журналам управляемых приложений с помощью Microsoft Edge. Дополнительные сведения см. в разделе [Использование Edge в iOS и Android для доступа к журналам управляемых приложений](manage-microsoft-edge.md#use-edge-for-ios-and-android-to-access-managed-app-logs).

1. Если он еще не установлен на устройстве, скачайте и установите **Microsoft Edge** из App Store. Дополнительные сведения см. в статье [Защищенные приложения Microsoft Intune](apps-supported-intune-apps.md).
2. Запустите **Microsoft Edge** и выберите **о intune** > **помощь intune** на панели навигации.
3. Щелкните **Начать**.
4. Щелкните **Поделиться журналами**.
5. Используйте выбранное почтовое приложение, чтобы отправить журнал себе для просмотра на компьютере. 
6. Проверьте **IntuneMAMDiagnostics.txt** в средстве просмотра текстовых файлов.
7. Найдите `ApplicationConfiguration`. Результаты будут выглядеть следующим образом:

    ``` JSON
        {
            (
                {
                    Name = "com.microsoft.intune.mam.managedbrowser.BlockListURLs";
                    Value = "https://www.aol.com";
                },
                {
                    Name = "com.microsoft.intune.mam.managedbrowser.bookmarks";
                    Value = "Outlook Web|https://outlook.office.com||Bing|https://www.bing.com";
                }
            );
        },
        {
            ApplicationConfiguration =             
            (
                {
                Name = IntuneMAMUPN;
                Value = "CMARScrubbedM:13c45c42712a47a1739577e5c92b5bc86c3b44fd9a27aeec3f32857f69ddef79cbb988a92f8241af6df8b3ced7d5ce06e2d23c33639ddc2ca8ad8d9947385f8a";
                },
                {
                Name = "com.microsoft.outlook.Mail.NotificationsEnabled";
                Value = false;
                }
            );
        }
    ```

Сведения о конфигурации приложения должны соответствовать политикам конфигурации приложения, настроенным для вашего клиента. 

![Целевая конфигурация приложения](./media/app-configuration-policies-overview/targeted-app-configuration-3.png)

### <a name="iosipados-configuration-on-managed-devices"></a>Конфигурация iOS/iPadOS на управляемых устройствах

Конфигурацию iOS или iPadOS можно проверить с помощью **журнала диагностики Intune** на управляемых устройствах для конфигурации управляемого приложения.

1. Если он еще не установлен на устройстве, скачайте и установите **Microsoft Edge** из App Store. Дополнительные сведения см. в статье [Защищенные приложения Microsoft Intune](apps-supported-intune-apps.md).
2. Запустите **Microsoft Edge** и выберите **о intune** > **помощь intune** на панели навигации.
3. Щелкните **Начать**.
4. Щелкните **Поделиться журналами**.
5. Используйте выбранное почтовое приложение, чтобы отправить журнал себе для просмотра на компьютере. 
6. Проверьте **IntuneMAMDiagnostics.txt** в средстве просмотра текстовых файлов.
7. Найдите `AppConfig`. Результаты должны соответствовать политикам конфигурации приложения, настроенным для вашего клиента.

### <a name="android-configuration-on-managed-devices"></a>Конфигурация Android на управляемых устройствах

Конфигурацию Android можно проверить с помощью **журнала диагностики Intune** на управляемых устройствах для конфигурации управляемого приложения.

Для сбора журналов с устройства Android вы или пользователь должны скачать журналы с устройства через USB-подключение (или эквивалент **Проводника** на устройстве). Ниже приведены шаги.

1. Подключите устройство Android к компьютеру с помощью USB-кабеля.
2. На компьютере найдите каталог с именем вашего устройства. Найдите `Android Device\Phone\Android\data\com.microsoft.windowsintune.companyportal` в этом каталоге.
3. В папке `com.microsoft.windowsintune.companyportal` откройте папку файлов и `OMADMLog_0`.
3. Выполните поиск `AppConfigHelper`, чтобы найти сообщения, связанные с конфигурацией приложения. Результаты будут выглядеть примерно так, как в следующем блоке данных:

    `2019-06-17T20:09:29.1970000       INFO   AppConfigHelper     10888  02256  Returning app config JSON [{"ApplicationConfiguration":[{"Name":"com.microsoft.intune.mam.managedbrowser.BlockListURLs","Value":"https:\/\/www.aol.com"},{"Name":"com.microsoft.intune.mam.managedbrowser.bookmarks","Value":"Outlook Web|https:\/\/outlook.office.com||Bing|https:\/\/www.bing.com"},{"Name":"com.microsoft.intune.mam.managedbrowser.homepage","Value":"https:\/\/www.arstechnica.com"}]},{"ApplicationConfiguration":[{"Name":"IntuneMAMUPN","Value":"AdeleV@M365x935807.OnMicrosoft.com"},{"Name":"com.microsoft.outlook.Mail.NotificationsEnabled","Value":"false"},{"Name":"com.microsoft.outlook.Mail.NotificationsEnabled.UserChangeAllowed","Value":"false"}]}] for user User-875363642`
    
## <a name="graph-api-support-for-app-configuration"></a>Поддержка API Graph для конфигурации приложений

Вы можете использовать API Graph для решения задач конфигурации. Подробнее см. в [Справочнике по API Graph в разделе «Целевая конфигурация MAM»](https://docs.microsoft.com/graph/api/resources/intune-shared-targetedmanagedappconfiguration?view=graph-rest-beta). Дополнительные сведения о Graph и Intune см. в статье [Работа с Intune в Microsoft Graph](https://docs.microsoft.com/graph/api/resources/intune-graph-overview?view=graph-rest-beta).

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="using-logs-to-show-a-configuration-parameter"></a>Использование журналов для отображения параметра конфигурации
Если в журналах присутствует параметр конфигурации, который должен быть применен, но не работает, возможно, у разработчика приложения возникла проблема с реализацией конфигурации. Сначала обратившись к этому разработчику приложения или проверив базу знаний, вы можете избежать обращения в службу поддержки корпорации Майкрософт. Если проблема в том, как конфигурация обрабатывается в приложении, необходимо будет устранить ее в обновленной версии этого приложения.

## <a name="next-steps"></a>Дальнейшие шаги

### <a name="managed-devices"></a>Управляемые устройства

- Узнайте, как использовать конфигурацию приложений на устройствах iOS и iPadOS.  См. сведения о [добавлении политик конфигурации приложений для управляемых устройств iOS и iPadOS](app-configuration-policies-use-ios.md).
- Узнайте, как использовать конфигурацию приложений на устройствах Android.  См. статью [Добавление политик конфигурации приложений для управляемых устройств Android](app-configuration-policies-use-android.md).

### <a name="managed-apps"></a>Управляемые приложения

- Узнайте, как использовать конфигурацию приложений на управляемых устройствах. См. статью [Добавление политик конфигурации для управляемых приложений без регистрации устройств](app-configuration-policies-managed-app.md).
