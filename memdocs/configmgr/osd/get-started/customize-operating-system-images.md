---
title: 'Настройка образов операционной системы '
titleSuffix: Configuration Manager
description: Используйте последовательности задач записи и создания, ручную настройку или сочетание этих двух методов для настройки образа операционной системы.
ms.date: 01/23/2017
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 95033a9b-ff13-4b70-b1de-bcb25bcb6024
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 652a0c5e36ce7c4bacf40531a82fdf4e16197d95
ms.sourcegitcommit: 214fb11771b61008271c6f21e17ef4d45353788f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2020
ms.locfileid: "82906913"
---
# <a name="customize-operating-system-images-with-configuration-manager"></a>Настройка образов операционных систем с помощью Configuration Manager

*Область применения: Configuration Manager (Current Branch)*

Образы операционной системы в Configuration Manager — это файлы формата WIM, которые представляют собой набор сжатых эталонных файлов и папок, необходимых для успешной установки и настройки операционной системы на компьютере. Пользовательский образ операционной системы создается и записывается на эталонном компьютере, конфигурация которого включает все необходимые файлы операционной системы, файлы поддержки, обновления программного обеспечения, средства и другие приложения. Вы сами решаете, какие действия по настройке эталонного компьютера следует выполнить вручную. Можно полностью автоматизировать настройку эталонного компьютера с помощью последовательности задач создания и сбора данных, настроить вручную некоторые параметры эталонного компьютера, завершив настройку автоматически с помощью последовательностей задач, или настроить эталонный компьютер вручную, не прибегая к последовательностям задач. Используйте сведения из следующих разделов для настройки операционной системы:

##  <a name="prepare-for-the--reference-computer"></a><a name="BKMK_PrepareReferenceComputer"></a> Подготовка компьютера-образца  
 Перед созданием образа операционной системы компьютера-образца нужно принять во внимание некоторые аспекты.  

###  <a name="decide-between-an-automated-or-manual-configuration"></a><a name="BKMK_RefComputerDecide"></a> Выбор автоматической или ручной настройки  
 Ниже указаны преимущества и недостатки автоматической и ручной настройки эталонного компьютера.  

#### <a name="automated-configuration"></a>Автоматическая настройка  
 **Преимущества**  

- Настройка может осуществляться в полностью автоматическом режиме, не требуя участия администратора или пользователя.  

- Последовательность задач можно использовать для настройки дополнительных эталонных компьютеров с предсказуемым результатом.  

- Последовательность задач можно изменять с учетом различий между эталонными компьютерами, не создавая ее с нуля.  

  **Недостатки**  

- На создание и тестирование последовательности задач может потребоваться много времени.  

- При существенном изменении требований к эталонному компьютеру на повторное создание и тестирование последовательности задач может потребоваться много времени.  

#### <a name="manual-configuration"></a>Ручная настройка  
 **Преимущества**  

- Не нужно тратить время на создание последовательности задач, а также ее настройку и устранение неполадок.  

- Установку можно производить непосредственно с компакт-дисков, не помещая все программные пакеты (включая саму ОС Windows) в пакет Configuration Manager.  

  **Недостатки**  

- Правильность настройки эталонного компьютера зависит от администратора или пользователя, который ее производит.  

- Необходимо проверять правильность настройки эталонного компьютера.  

- Нельзя многократно использовать конфигурацию.  

- Процесс требует активного участия человека.  

###  <a name="considerations-for-the-reference-computer"></a><a name="BKMK_RefComputerConsiderations"></a> Рекомендации для компьютера-образца  
 Ниже перечислены основные элементы, которые следует рассмотреть при настройке эталонного компьютера.  

-   **Развертываемая операционная система**  

     На эталонном компьютере должна быть установлена операционная система, которую планируется развертывать на конечные компьютеры. Дополнительные сведения о доступных для развертывания операционных системах см. в разделе [Требования к инфраструктуре для развертывания операционной системы](../plan-design/infrastructure-requirements-for-operating-system-deployment.md).  

-   **Надлежащий пакет обновления**  

     На эталонном компьютере должна быть установлена операционная система, которую планируется развертывать на конечные компьютеры.  

-   **Соответствующие обновления ПО**  

     Установите все приложения, которые необходимо включить в образ операционной системы, создаваемый на основе эталонного компьютера. Приложения можно также устанавливать в процессе развертывания созданного образа операционной системы на конечных компьютерах.  

-   **Членство в рабочей группе**  

     Эталонный компьютер должен входить в рабочую группу.  

-   **Sysprep**  

     Средство подготовки системы (Sysprep) — это технология, которая используется с другими средствами развертывания для установки операционных систем Windows на новом оборудовании. Программа Sysprep подготавливает компьютер к созданию образа диска или к доставке его клиенту путем настройки компьютера для создания нового идентификатора безопасности (SID) при перезапуске компьютера. Кроме того, программа Sysprep очищает пользовательские и компьютерные настройки и данные, которые не следует копировать на конечный компьютер.  

     Чтобы подготовить эталонный компьютер вручную с помощью средства Sysprep, выполните указанную ниже команду:  

     `Sysprep /quiet /generalize /reboot`  

     Параметр /generalize предписывает программе Sysprep удалить сведения о системе из установки Windows. Сведения о системе включают журналы событий, уникальные идентификаторы безопасности (SID) и другие уникальные данные. После удаления уникальных сведений о системе компьютер будет перезагружен.  

     Также можно автоматизировать выполнение средства Sysprep с помощью шага последовательности задач [Подготовка Windows перед снятием образа](../understand/task-sequence-steps.md#BKMK_PrepareWindowsforCapture) или носителя для снятия образа.  

    > [!IMPORTANT]  
    >  Перед выполнением средства Sysprep шаг [Подготовка Windows перед снятием образа](../understand/task-sequence-steps.md#BKMK_PrepareWindowsforCapture) последовательности задач пытается сбросить пароль локального администратора до пустого значения на компьютере-образце. Если включена локальная политика безопасности **Пароль должен отвечать требованиям сложности** , сделать это не удастся. В этом случае отключите эту политику перед выполнением последовательности задач.  

     Дополнительные сведения о SysPrep см. в статье [Обзор средства SysPrep](https://docs.microsoft.com/windows-hardware/manufacture/desktop/sysprep--system-preparation--overview).  

-   **Соответствующие средства и скрипты, необходимые для успешного выполнения сценариев установки**  

     Соответствующие средства и сценарии, необходимые для успешного выполнения сценариев установки  

-   **Соответствующие настройки рабочего стола, такие как фоновый рисунок, фирменная символика и профиль пользователя по умолчанию**  

     На эталонном компьютере можно настроить свойства рабочего стола, которые следует включить в создаваемый образ операционной системы. К этим свойствам относятся фоновый рисунок, фирменная символика организации и профиль пользователя по умолчанию.  

##  <a name="manually-build-a-reference-computer"></a><a name="BKMK_ManuallyBuildReference"></a> Создание компьютера-образца вручную  
 Для создания эталонного компьютера вручную выполните следующие действия.  

> [!NOTE]  
>  При создании эталонного компьютера вручную образ операционной системы можно снять с помощью носителя для снятия образа. Дополнительные сведения см. в разделе [Создание носителя для снятия образа](../deploy-use/create-capture-media.md).  

#### <a name="to-manually-build-the-reference-computer"></a>Создание эталонного компьютера вручную  

1. Определите компьютер для использования в качестве эталонного.  

2. Настройте эталонный компьютер, установив на нем соответствующую операционную систему и любое другое программное обеспечение, необходимое для создания образа развертываемой операционной системы.  

   > [!WARNING]  
   >  Как минимум следует установить требуемую операционную систему, пакет обновления, вспомогательные драйверы и обязательные обновления.  

3. Эталонный компьютер необходимо сделать членом рабочей группы.  

4. Выполните сброс пароля локального администратора на эталонном компьютере, чтобы оставить поле пароля пустым.  

5. Запустите программу Sysprep с помощью следующей команды:  **sysprep /quiet /generalize /reboot**. Параметр /generalize предписывает программе Sysprep удалить сведения о системе из установки Windows. Сведения о системе включают журналы событий, уникальные идентификаторы безопасности (SID) и другие уникальные данные. После удаления уникальных сведений о системе компьютер будет перезагружен.  

   Когда компьютер-образец готов, используйте последовательность задач, чтобы записать с него образ операционной системы.  Более подробное пошаговое описание см. в разделе [Запись образа операционной системы с существующего компьютера-образца](../deploy-use/create-a-task-sequence-to-capture-an-operating-system.md#BKMK_CaptureExistingRefComputer).  

##  <a name="use-a-task-sequence-to-build-a-reference-computer"></a><a name="BKMK_UseTSToBuildReference"></a> Использование последовательности задач для создания компьютера-образца  
 В целях автоматизации создания эталонного компьютера можно использовать последовательность задач для развертывания операционной системы, драйверов, приложений и т. п.  Воспользуйтесь следующими шагами, чтобы записать образ операционной системы с компьютера-образца.  

-   Используйте последовательность задач для сборки и записи образа операционной системы с компьютера-образца.  Подробные инструкции см. в разделе [Использование последовательности задач для создания и записи компьютера-образца](../deploy-use/create-a-task-sequence-to-capture-an-operating-system.md#BKMK_BuildCaptureTS).  
